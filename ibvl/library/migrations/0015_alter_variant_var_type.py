# Generated by Django 4.2.13 on 2025-03-13 15:04

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("library", "0014_alter_varianttranscript_transcript"),
    ]
    
    def rename_old_variant(apps, schema_editor):
        Variant = apps.get_model("library", "Variant")
        for variant in Variant.objects.all():
            if variant.var_type == "SNP":
                variant.var_type = "SNV"
            variant.save()

    def revert_variant_rename(apps, schema_editor):
        Variant = apps.get_model("library", "Variant")
        for variant in Variant.objects.all():
            if variant.var_type == "SNV":
                variant.var_type = "SNP"
            variant.save()

    operations = [
        migrations.AlterField(
            model_name="variant",
            name="var_type",
            field=models.CharField(
                choices=[
                    ("SNV", "SNV"),
                    ("INDEL", "INDEL"),
                    ("M", "Mitochondrial"),
                    ("SV", "SV"),
                ],
                max_length=30,
            ),
        ),
        migrations.RunPython(rename_old_variant, revert_variant_rename),
    ]
